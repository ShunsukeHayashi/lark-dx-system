{
  "alert_workflows": {
    "inventory_shortage_alert": {
      "workflow_name": "åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬ã‚¢ãƒ©ãƒ¼ãƒˆ",
      "description": "åœ¨åº«ãŒå±é™ºæ°´æº–ã«é”ã—ãŸå•†å“ã‚’æ¤œçŸ¥ã—ã€è‡ªå‹•çš„ã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ç”Ÿæˆ",
      "trigger": {
        "type": "å®šæœŸå®Ÿè¡Œ",
        "schedule": "æ¯æ—¥ 09:00",
        "timezone": "Asia/Tokyo",
        "target_table": "tbl_inventory_balance"
      },
      "conditions": [
        {
          "field": "åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬",
          "operator": "=",
          "value": "ğŸš¨ç·Šæ€¥ç™ºæ³¨",
          "logic": "AND"
        },
        {
          "field": "å•†å“.ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
          "operator": "=",
          "value": "è²©å£²ä¸­",
          "logic": "AND"
        },
        {
          "field": "ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆæ¸ˆãƒ•ãƒ©ã‚°",
          "operator": "!=",
          "value": true
        }
      ],
      "actions": [
        {
          "type": "field_update",
          "updates": [
            {
              "field": "ã‚¢ãƒ©ãƒ¼ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
              "value": "ğŸš¨è¦å¯¾å¿œ"
            },
            {
              "field": "ã‚¢ãƒ©ãƒ¼ãƒˆæ›´æ–°æ—¥æ™‚",
              "value": "NOW()"
            },
            {
              "field": "ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆæ¸ˆãƒ•ãƒ©ã‚°",
              "value": true
            }
          ]
        },
        {
          "type": "notification",
          "recipients": ["@{{å•†å“.æ‹…å½“ãƒã‚¤ãƒ¤ãƒ¼}}", "@{{åº—èˆ—.åº—é•·}}"],
          "message": "ã€ç·Šæ€¥ã€‘{{å•†å“.å•†å“å}}ã®åœ¨åº«ãŒå±é™ºæ°´æº–ã§ã™\\nåº—èˆ—: {{åº—èˆ—.åº—èˆ—å}}\\nç¾åœ¨åº«: {{ç¾åœ¨åº«æ•°}}å€‹\\näºˆæ¸¬æ®‹æ—¥æ•°: {{äºˆæ¸¬æ®‹æ—¥æ•°}}æ—¥\\næ¨å¥¨ç™ºæ³¨æ•°: {{æ¨å¥¨ç™ºæ³¨æ•°}}å€‹",
          "priority": "high",
          "channels": ["lark", "email"]
        },
        {
          "type": "record_create",
          "target_table": "tbl_inventory_alert",
          "values": {
            "ã‚¢ãƒ©ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—": "æ¬ å“äºˆæ¸¬",
            "é‡è¦åº¦": "ç·Šæ€¥",
            "å•†å“": "{{å•†å“}}",
            "åº—èˆ—": "{{åº—èˆ—}}",
            "ç¾åœ¨åº«æ•°": "{{ç¾åœ¨åº«æ•°}}",
            "é–¾å€¤": "{{å®‰å…¨åœ¨åº«æ•°}}",
            "äºˆæ¸¬æ®‹æ—¥æ•°": "{{äºˆæ¸¬æ®‹æ—¥æ•°}}",
            "æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³": "ç·Šæ€¥ç™ºæ³¨: {{æ¨å¥¨ç™ºæ³¨æ•°}}å€‹",
            "å¯¾å¿œæœŸé™": "TODAY() + 1"
          }
        },
        {
          "type": "conditional_action",
          "condition": "{{è‡ªå‹•ç™ºæ³¨å¯}} = TRUE",
          "true_action": {
            "type": "record_create",
            "target_table": "tbl_purchase_order",
            "values": {
              "ç™ºæ³¨ã‚¿ã‚¤ãƒ—": "ç·Šæ€¥ç™ºæ³¨",
              "ä»•å…¥å…ˆ": "{{å•†å“.ä»•å…¥å…ˆ}}",
              "å•†å“æ˜ç´°": "{{å•†å“}}",
              "ç™ºæ³¨æ•°é‡": "{{æ¨å¥¨ç™ºæ³¨æ•°}}",
              "ç´å“å¸Œæœ›æ—¥": "TODAY() + {{å•†å“.ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ }}",
              "ç·Šæ€¥ç™ºæ³¨ãƒ•ãƒ©ã‚°": true,
              "ç™ºæ³¨ãƒ¡ãƒ¢": "åœ¨åº«åˆ‡ã‚Œäºˆæ¸¬ã«ã‚ˆã‚‹è‡ªå‹•ç™ºæ³¨"
            }
          }
        }
      ],
      "error_handling": {
        "on_error": "continue",
        "notify_admin": true,
        "log_errors": true
      }
    },
    "expiry_date_alert": {
      "workflow_name": "æ¶ˆè²»æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆ",
      "description": "æ¶ˆè²»æœŸé™ãŒè¿‘ã„å•†å“ã‚’æ¤œçŸ¥ã—ã€å‡¦åˆ†ã‚„å€¤å¼•ãè²©å£²ã‚’ä¿ƒã™",
      "trigger": {
        "type": "å®šæœŸå®Ÿè¡Œ",
        "schedule": "æ¯æ—¥ 08:00",
        "target_table": "tbl_inventory_transaction"
      },
      "conditions": [
        {
          "field": "æœŸé™çŠ¶æ…‹",
          "operator": "IN",
          "value": ["ğŸ”´æœŸé™åˆ‡ã‚Œ", "ğŸŸ¡æœŸé™é–“è¿‘"],
          "logic": "AND"
        },
        {
          "field": "ç§»å‹•ã‚¿ã‚¤ãƒ—",
          "operator": "=",
          "value": "å…¥è·"
        }
      ],
      "actions": [
        {
          "type": "notification",
          "recipients": ["@{{åº—èˆ—.åº—é•·}}", "@{{å‡¦ç†æ‹…å½“è€…}}"],
          "message": "ã€æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆã€‘{{å•†å“.å•†å“å}}\\næœ‰åŠ¹æœŸé™: {{æœ‰åŠ¹æœŸé™}}\\næ®‹æ—¥æ•°: {{æœ‰åŠ¹æœŸé™}} - TODAY()æ—¥\\nãƒ­ãƒƒãƒˆç•ªå·: {{ãƒ­ãƒƒãƒˆç•ªå·}}\\nå¯¾å¿œæ¨å¥¨: å€¤å¼•ãè²©å£²ã¾ãŸã¯å»ƒæ£„å‡¦ç†",
          "priority": "medium"
        },
        {
          "type": "record_create",
          "target_table": "tbl_inventory_alert",
          "values": {
            "ã‚¢ãƒ©ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—": "æœŸé™åˆ‡ã‚Œé–“è¿‘",
            "é‡è¦åº¦": "é«˜",
            "å•†å“": "{{å•†å“}}",
            "åº—èˆ—": "{{ç§»å‹•å…ˆåº—èˆ—}}",
            "æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³": "å€¤å¼•ãè²©å£²ã¾ãŸã¯å»ƒæ£„å‡¦ç†ã‚’æ¤œè¨"
          }
        }
      ]
    },
    "overstock_alert": {
      "workflow_name": "éå‰°åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆ",
      "description": "åœ¨åº«å›è»¢ç‡ãŒä½ã„å•†å“ã‚„éå‰°åœ¨åº«ã‚’æ¤œçŸ¥",
      "trigger": {
        "type": "å®šæœŸå®Ÿè¡Œ",
        "schedule": "æ¯é€±æœˆæ›œæ—¥ 10:00",
        "target_table": "tbl_inventory_balance"
      },
      "conditions": [
        {
          "field": "åœ¨åº«çŠ¶æ…‹",
          "operator": "=",
          "value": "ğŸŸ¡éå‰°åœ¨åº«",
          "logic": "OR"
        },
        {
          "field": "åœ¨åº«å›è»¢ç‡",
          "operator": "<",
          "value": 6,
          "logic": "AND"
        },
        {
          "field": "åœ¨åº«è©•ä¾¡é¡",
          "operator": ">",
          "value": 1000000
        }
      ],
      "actions": [
        {
          "type": "field_update",
          "updates": [
            {
              "field": "éå‰°åœ¨åº«ãƒ•ãƒ©ã‚°",
              "value": true
            },
            {
              "field": "æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥",
              "value": "TODAY()"
            }
          ]
        },
        {
          "type": "notification",
          "recipients": ["@{{å•†å“.æ‹…å½“ãƒã‚¤ãƒ¤ãƒ¼}}"],
          "message": "ã€éå‰°åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆã€‘\\nå•†å“: {{å•†å“.å•†å“å}}\\nç¾åœ¨åº«: {{ç¾åœ¨åº«æ•°}}å€‹\\nåœ¨åº«è©•ä¾¡é¡: Â¥{{åœ¨åº«è©•ä¾¡é¡}}\\nåœ¨åº«å›è»¢ç‡: {{åœ¨åº«å›è»¢ç‡}}å›/å¹´\\næ¨å¥¨: ã‚»ãƒ¼ãƒ«å®Ÿæ–½ã¾ãŸã¯ä»•å…¥ã‚Œèª¿æ•´",
          "priority": "low"
        },
        {
          "type": "record_create",
          "target_table": "tbl_inventory_alert",
          "values": {
            "ã‚¢ãƒ©ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—": "åœ¨åº«éå¤š",
            "é‡è¦åº¦": "ä¸­",
            "æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³": "è²©ä¿ƒå¼·åŒ–ã€ä»•å…¥ã‚ŒæŠ‘åˆ¶ã€åº—èˆ—é–“ç§»å‹•ã‚’æ¤œè¨"
          }
        }
      ]
    },
    "reorder_point_alert": {
      "workflow_name": "ç™ºæ³¨ç‚¹åˆ°é”ã‚¢ãƒ©ãƒ¼ãƒˆ",
      "description": "åœ¨åº«ãŒç™ºæ³¨ç‚¹ã«é”ã—ãŸå•†å“ã®ç™ºæ³¨ã‚’ä¿ƒã™",
      "trigger": {
        "type": "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°",
        "monitor_field": "ç¾åœ¨åº«æ•°",
        "target_table": "tbl_inventory_balance"
      },
      "conditions": [
        {
          "field": "ç¾åœ¨åº«æ•°",
          "operator": "<=",
          "value": "{{å•†å“.ç™ºæ³¨ç‚¹}}",
          "logic": "AND"
        },
        {
          "field": "å•†å“.ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
          "operator": "=",
          "value": "è²©å£²ä¸­",
          "logic": "AND"
        },
        {
          "field": "ç™ºæ³¨æ¸ˆãƒ•ãƒ©ã‚°",
          "operator": "=",
          "value": false
        }
      ],
      "actions": [
        {
          "type": "notification",
          "recipients": ["@{{å•†å“.æ‹…å½“ãƒã‚¤ãƒ¤ãƒ¼}}"],
          "message": "ã€ç™ºæ³¨æ¨å¥¨ã€‘{{å•†å“.å•†å“å}}ãŒç™ºæ³¨ç‚¹ã«åˆ°é”\\nç¾åœ¨åº«: {{ç¾åœ¨åº«æ•°}}å€‹\\nç™ºæ³¨ç‚¹: {{å•†å“.ç™ºæ³¨ç‚¹}}å€‹\\næ¨å¥¨ç™ºæ³¨æ•°: {{æ¨å¥¨ç™ºæ³¨æ•°}}å€‹",
          "add_button": {
            "label": "ç™ºæ³¨ç”»é¢ã¸",
            "action": "open_form",
            "form": "ç™ºæ³¨ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ",
            "prefill": {
              "å•†å“": "{{å•†å“}}",
              "æ•°é‡": "{{æ¨å¥¨ç™ºæ³¨æ•°}}"
            }
          }
        },
        {
          "type": "field_update",
          "updates": [
            {
              "field": "ç™ºæ³¨æ¨å¥¨ãƒ•ãƒ©ã‚°",
              "value": true
            },
            {
              "field": "ç™ºæ³¨æ¨å¥¨æ—¥",
              "value": "TODAY()"
            }
          ]
        }
      ]
    },
    "abnormal_movement_alert": {
      "workflow_name": "ç•°å¸¸å€¤æ¤œçŸ¥ã‚¢ãƒ©ãƒ¼ãƒˆ",
      "description": "é€šå¸¸ã¨ç•°ãªã‚‹åœ¨åº«ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œçŸ¥",
      "trigger": {
        "type": "ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ",
        "target_table": "tbl_inventory_transaction"
      },
      "conditions": [
        {
          "field": "æ•°é‡",
          "operator": ">",
          "value": "{{å•†å“.æ—¥æ¬¡å¹³å‡æ¶ˆè²»}} * 5",
          "logic": "OR"
        },
        {
          "field": "é‡‘é¡",
          "operator": ">",
          "value": 5000000,
          "logic": "OR"
        },
        {
          "field": "ç§»å‹•ã‚¿ã‚¤ãƒ—",
          "operator": "=",
          "value": "å»ƒæ£„",
          "logic": "AND"
        },
        {
          "field": "æ•°é‡",
          "operator": ">",
          "value": 100
        }
      ],
      "actions": [
        {
          "type": "notification",
          "recipients": ["@{{åº—èˆ—.åº—é•·}}", "@ç®¡ç†è€…"],
          "message": "ã€ç•°å¸¸å€¤æ¤œçŸ¥ã€‘é€šå¸¸ã¨ç•°ãªã‚‹åœ¨åº«ç§»å‹•ã‚’æ¤œçŸ¥\\nç¨®é¡: {{ç§»å‹•ã‚¿ã‚¤ãƒ—}}\\nå•†å“: {{å•†å“.å•†å“å}}\\næ•°é‡: {{æ•°é‡}}å€‹\\né‡‘é¡: Â¥{{é‡‘é¡}}\\nç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™",
          "priority": "high"
        },
        {
          "type": "field_update",
          "updates": [
            {
              "field": "è¦ç¢ºèªãƒ•ãƒ©ã‚°",
              "value": true
            },
            {
              "field": "æ‰¿èªãƒ•ãƒ©ã‚°",
              "value": false
            }
          ]
        },
        {
          "type": "approval_request",
          "approver": "@{{åº—èˆ—.åº—é•·}}",
          "message": "ç•°å¸¸ãªåœ¨åº«ç§»å‹•ã®æ‰¿èªãŒå¿…è¦ã§ã™",
          "deadline": "24æ™‚é–“",
          "on_approval": {
            "field_update": {
              "æ‰¿èªãƒ•ãƒ©ã‚°": true,
              "æ‰¿èªæ—¥æ™‚": "NOW()"
            }
          },
          "on_rejection": {
            "field_update": {
              "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
              "ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç†ç”±": "ç•°å¸¸å€¤ã«ã‚ˆã‚Šæ‰¿èªå¦èª"
            }
          }
        }
      ]
    }
  }
}