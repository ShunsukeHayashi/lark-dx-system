{
  "approval_workflows": {
    "purchase_order_approval": {
      "workflow_name": "ç™ºæ³¨æ‰¿èªãƒ•ãƒ­ãƒ¼",
      "description": "é‡‘é¡ã‚„æ¡ä»¶ã«å¿œã˜ãŸå¤šæ®µéšæ‰¿èªãƒ—ãƒ­ã‚»ã‚¹",
      "trigger": {
        "type": "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°",
        "monitor_field": "ç™ºæ³¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
        "condition": "å€¤ãŒ 'æ‰¿èªç”³è«‹' ã«å¤‰æ›´ã•ã‚ŒãŸæ™‚",
        "target_table": "tbl_purchase_order"
      },
      "approval_levels": [
        {
          "level": 1,
          "name": "éƒ¨é–€æ‰¿èª",
          "conditions": [
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": ">=",
              "value": 100000,
              "logic": "AND"
            },
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": "<",
              "value": 1000000
            }
          ],
          "approvers": {
            "type": "field_reference",
            "field": "ç™ºæ³¨æ‹…å½“è€….ä¸Šé•·"
          },
          "deadline": "2å–¶æ¥­æ—¥",
          "escalation": {
            "after": "1å–¶æ¥­æ—¥",
            "to": "éƒ¨é–€é•·"
          }
        },
        {
          "level": 2,
          "name": "ç®¡ç†è·æ‰¿èª",
          "conditions": [
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": ">=",
              "value": 1000000,
              "logic": "AND"
            },
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": "<",
              "value": 5000000
            }
          ],
          "approvers": {
            "type": "role",
            "role": "è³¼è²·éƒ¨é–€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"
          },
          "deadline": "3å–¶æ¥­æ—¥",
          "escalation": {
            "after": "2å–¶æ¥­æ—¥",
            "to": "è³¼è²·éƒ¨é•·"
          }
        },
        {
          "level": 3,
          "name": "å½¹å“¡æ‰¿èª",
          "conditions": [
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": ">=",
              "value": 5000000,
              "logic": "OR"
            },
            {
              "field": "ç·Šæ€¥ç™ºæ³¨ãƒ•ãƒ©ã‚°",
              "operator": "=",
              "value": true,
              "logic": "AND"
            },
            {
              "field": "ç™ºæ³¨é‡‘é¡åˆè¨ˆ",
              "operator": ">=",
              "value": 1000000
            }
          ],
          "approvers": {
            "type": "group",
            "group": ["è³¼è²·éƒ¨é•·", "è²¡å‹™éƒ¨é•·"]
          },
          "approval_type": "all",
          "deadline": "5å–¶æ¥­æ—¥"
        }
      ],
      "actions": {
        "on_submit": [
          {
            "type": "field_update",
            "updates": [
              {
                "field": "æ‰¿èªç”³è«‹æ—¥æ™‚",
                "value": "NOW()"
              },
              {
                "field": "æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
                "value": "æ‰¿èªå¾…ã¡"
              }
            ]
          },
          {
            "type": "notification",
            "recipients": ["{{current_approver}}"],
            "message": "ã€æ‰¿èªä¾é ¼ã€‘ç™ºæ³¨æ‰¿èªã‚’ãŠé¡˜ã„ã—ã¾ã™\\nç™ºæ³¨ç•ªå·: {{ç™ºæ³¨ç•ªå·}}\\nä»•å…¥å…ˆ: {{ä»•å…¥å…ˆ.ä»•å…¥å…ˆå}}\\né‡‘é¡: Â¥{{ç™ºæ³¨é‡‘é¡åˆè¨ˆ}}\\nç”³è«‹è€…: {{ç™ºæ³¨æ‹…å½“è€…}}",
            "add_button": {
              "label": "æ‰¿èªç”»é¢ã¸",
              "action": "open_approval_form"
            }
          }
        ],
        "on_approval": [
          {
            "type": "field_update",
            "updates": [
              {
                "field": "ç™ºæ³¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
                "value": "ç™ºæ³¨æ¸ˆ"
              },
              {
                "field": "æ‰¿èªæ—¥æ™‚",
                "value": "NOW()"
              },
              {
                "field": "æ‰¿èªè€…",
                "value": "CURRENT_USER()"
              },
              {
                "field": "æ‰¿èªå±¥æ­´",
                "value": "CONCATENATE(æ‰¿èªå±¥æ­´, '\\n', TODAY(), ': ', CURRENT_USER(), ' - æ‰¿èª')"
              }
            ]
          },
          {
            "type": "notification",
            "recipients": ["{{ç™ºæ³¨æ‹…å½“è€…}}"],
            "message": "ã€æ‰¿èªå®Œäº†ã€‘ç™ºæ³¨ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸ\\nç™ºæ³¨ç•ªå·: {{ç™ºæ³¨ç•ªå·}}\\næ‰¿èªè€…: {{æ‰¿èªè€…}}\\næ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: ä»•å…¥å…ˆã¸ã®ç™ºæ³¨é€ä¿¡"
          },
          {
            "type": "workflow_trigger",
            "workflow": "ç™ºæ³¨é€ä¿¡ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
          }
        ],
        "on_rejection": [
          {
            "type": "field_update",
            "updates": [
              {
                "field": "ç™ºæ³¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
                "value": "å·®æˆ»ã—"
              },
              {
                "field": "å·®æˆ»ã—æ—¥æ™‚",
                "value": "NOW()"
              },
              {
                "field": "å·®æˆ»ã—è€…",
                "value": "CURRENT_USER()"
              }
            ]
          },
          {
            "type": "notification",
            "recipients": ["{{ç™ºæ³¨æ‹…å½“è€…}}"],
            "message": "ã€æ‰¿èªå¦èªã€‘ç™ºæ³¨ãŒå·®ã—æˆ»ã•ã‚Œã¾ã—ãŸ\\nç™ºæ³¨ç•ªå·: {{ç™ºæ³¨ç•ªå·}}\\nå·®æˆ»ã—è€…: {{å·®æˆ»ã—è€…}}\\nç†ç”±: {{å·®æˆ»ã—ç†ç”±}}\\nä¿®æ­£ã—ã¦å†ç”³è«‹ã—ã¦ãã ã•ã„"
          }
        ],
        "on_timeout": [
          {
            "type": "notification",
            "recipients": ["{{escalation_approver}}", "@ç®¡ç†è€…"],
            "message": "ã€æ‰¿èªé…å»¶ã€‘æ‰¿èªæœŸé™ã‚’éãã¦ã„ã¾ã™\\nç™ºæ³¨ç•ªå·: {{ç™ºæ³¨ç•ªå·}}\\né‡‘é¡: Â¥{{ç™ºæ³¨é‡‘é¡åˆè¨ˆ}}\\nç”³è«‹æ—¥: {{æ‰¿èªç”³è«‹æ—¥æ™‚}}\\nè‡³æ€¥å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™",
            "priority": "high"
          }
        ]
      },
      "reminders": [
        {
          "timing": "æœŸé™1æ—¥å‰",
          "recipients": ["{{current_approver}}"],
          "message": "ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã€‘æ˜æ—¥ãŒæ‰¿èªæœŸé™ã§ã™"
        },
        {
          "timing": "æœŸé™å½“æ—¥",
          "recipients": ["{{current_approver}}", "{{approver_manager}}"],
          "message": "ã€ç·Šæ€¥ã€‘æœ¬æ—¥ãŒæ‰¿èªæœŸé™ã§ã™"
        }
      ]
    },
    "inventory_adjustment_approval": {
      "workflow_name": "æ£šå¸å·®ç•°æ‰¿èªãƒ•ãƒ­ãƒ¼",
      "description": "æ£šå¸ã«ã‚ˆã‚‹åœ¨åº«èª¿æ•´ã®æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹",
      "trigger": {
        "type": "ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ",
        "target_table": "tbl_stocktake",
        "condition": "å·®ç•°é‡‘é¡ã®çµ¶å¯¾å€¤ > 50000"
      },
      "approval_rules": [
        {
          "name": "å°‘é¡å·®ç•°",
          "conditions": [
            {
              "field": "å·®ç•°é‡‘é¡",
              "operator": "ABS",
              "comparison": "<=",
              "value": 100000
            }
          ],
          "approver": "åº—é•·",
          "auto_approve_if": "å·®ç•°ç‡ < 1%"
        },
        {
          "name": "é«˜é¡å·®ç•°",
          "conditions": [
            {
              "field": "å·®ç•°é‡‘é¡",
              "operator": "ABS",
              "comparison": ">",
              "value": 100000
            }
          ],
          "approver": "ã‚¨ãƒªã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼",
          "requires_investigation": true
        }
      ],
      "actions": {
        "on_approval": [
          {
            "type": "record_create",
            "target_table": "tbl_inventory_transaction",
            "values": {
              "ç§»å‹•ã‚¿ã‚¤ãƒ—": "æ£šå¸èª¿æ•´",
              "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": "å®Œäº†",
              "å•†å“": "{{å•†å“}}",
              "æ•°é‡": "{{å·®ç•°æ•°é‡}}",
              "å‚™è€ƒ": "æ£šå¸ã«ã‚ˆã‚‹åœ¨åº«èª¿æ•´ï¼ˆæ‰¿èªæ¸ˆï¼‰"
            }
          },
          {
            "type": "field_update",
            "target_table": "tbl_inventory_balance",
            "updates": [
              {
                "field": "ç¾åœ¨åº«æ•°",
                "value": "{{å®Ÿåœ°æ£šå¸æ•°}}"
              },
              {
                "field": "æœ€çµ‚æ£šå¸æ—¥",
                "value": "TODAY()"
              }
            ]
          }
        ]
      }
    },
    "urgent_order_approval": {
      "workflow_name": "ç·Šæ€¥ç™ºæ³¨æ‰¿èªãƒ•ãƒ­ãƒ¼",
      "description": "é€šå¸¸ã®æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’çŸ­ç¸®ã—ãŸç·Šæ€¥æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹",
      "trigger": {
        "type": "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ›´æ–°",
        "monitor_field": "ç·Šæ€¥ç™ºæ³¨ãƒ•ãƒ©ã‚°",
        "condition": "å€¤ãŒ TRUE ã«è¨­å®šã•ã‚ŒãŸæ™‚",
        "target_table": "tbl_purchase_order"
      },
      "fast_track_rules": {
        "approval_path": "ä¸¦åˆ—æ‰¿èª",
        "approvers": ["ç™ºæ³¨æ‹…å½“è€…ã®ä¸Šé•·", "è³¼è²·éƒ¨é–€æ‹…å½“è€…"],
        "required_approvals": 1,
        "deadline": "4æ™‚é–“",
        "notification_priority": "urgent"
      },
      "actions": {
        "on_any_approval": [
          {
            "type": "field_update",
            "updates": [
              {
                "field": "ç™ºæ³¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
                "value": "ç·Šæ€¥æ‰¿èªæ¸ˆ"
              },
              {
                "field": "ç·Šæ€¥æ‰¿èªè€…",
                "value": "CURRENT_USER()"
              },
              {
                "field": "ç·Šæ€¥æ‰¿èªæ—¥æ™‚",
                "value": "NOW()"
              }
            ]
          },
          {
            "type": "notification",
            "recipients": ["{{ä»•å…¥å…ˆ.æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ«}}"],
            "message": "ã€ç·Šæ€¥ç™ºæ³¨ã€‘è‡³æ€¥å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™",
            "channel": "email",
            "priority": "high"
          }
        ]
      }
    },
    "return_approval": {
      "workflow_name": "è¿”å“æ‰¿èªãƒ•ãƒ­ãƒ¼",
      "description": "å•†å“è¿”å“ã®æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹",
      "trigger": {
        "type": "ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ",
        "target_table": "tbl_inventory_transaction",
        "condition": "ç§»å‹•ã‚¿ã‚¤ãƒ— = 'è¿”å“'"
      },
      "approval_matrix": {
        "by_amount": [
          {
            "range": "0-50000",
            "approver": "åº—èˆ—æ‹…å½“è€…",
            "can_self_approve": false
          },
          {
            "range": "50001-200000",
            "approver": "åº—é•·",
            "requires_reason": true
          },
          {
            "range": "200001-",
            "approver": "ã‚¨ãƒªã‚¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼",
            "requires_investigation": true,
            "additional_approver": "å“è³ªç®¡ç†éƒ¨é–€"
          }
        ]
      },
      "validation_checks": [
        {
          "check": "è¿”å“ç†ç”±ã®è¨˜è¼‰",
          "required": true
        },
        {
          "check": "å•†å“çŠ¶æ…‹ã®ç¢ºèª",
          "required": true
        },
        {
          "check": "ä»•å…¥å…ˆã¸ã®é€£çµ¡",
          "required": "é‡‘é¡ > 100000"
        }
      ],
      "actions": {
        "on_approval": [
          {
            "type": "notification",
            "recipients": ["{{å•†å“.ä»•å…¥å…ˆ.æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ«}}"],
            "message": "è¿”å“ç”³è«‹ã®ã”é€£çµ¡",
            "attachments": ["è¿”å“æ˜ç´°", "è¿”å“ç†ç”±æ›¸"]
          },
          {
            "type": "field_update",
            "updates": [
              {
                "field": "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
                "value": "è¿”å“æ‰¿èªæ¸ˆ"
              }
            ]
          }
        ]
      }
    }
  },
  "approval_settings": {
    "global_settings": {
      "business_days_only": true,
      "timezone": "Asia/Tokyo",
      "approval_history_retention": "3å¹´",
      "delegate_approval": {
        "enabled": true,
        "auto_delegate_on_absence": true
      }
    },
    "notification_templates": {
      "approval_request": {
        "subject": "ã€æ‰¿èªä¾é ¼ã€‘{{workflow_name}} - {{record_id}}",
        "body": "æ‰¿èªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\\n\\nè©³ç´°:\\n{{approval_details}}\\n\\næœŸé™: {{deadline}}",
        "priority_indicators": {
          "urgent": "ğŸš¨",
          "high": "âš ï¸",
          "normal": "ğŸ“‹"
        }
      },
      "approval_reminder": {
        "subject": "ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã€‘æ‰¿èªæœŸé™ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™",
        "body": "ä»¥ä¸‹ã®æ‰¿èªãŒæœŸé™é–“è¿‘ã§ã™ï¼š\\n{{pending_approvals}}",
        "send_before": ["1æ—¥å‰", "2æ™‚é–“å‰"]
      }
    },
    "approval_delegation": {
      "rules": [
        {
          "condition": "æ‰¿èªè€…ãŒä¸åœ¨è¨­å®šä¸­",
          "delegate_to": "æ‰¿èªè€…ã®ä»£ç†äºº"
        },
        {
          "condition": "æ‰¿èªè€…ãŒ3æ—¥é–“æœªå¯¾å¿œ",
          "delegate_to": "ä¸Šä½æ‰¿èªè€…"
        }
      ]
    }
  }
}